{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "schemas/operators/platform_context_load.output.v1.json",
  "title": "Operator: Platform.Context.Load (output) (v1)",
  "allOf": [
    { "$ref": "operator_result_base.v1.json" },
    {
      "type": "object",
      "properties": {
        "result": {
          "type": ["object", "null"],
          "additionalProperties": false,
          "required": ["platform", "platform_context_hash"],
          "properties": {
            "platform": {
              "type": "object",
              "additionalProperties": false,
              "required": ["student", "funding_request", "professor"],
              "properties": {
                "student": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["id"],
                  "properties": {
                    "id": { "$ref": "../common/defs.v1.json#/$defs/StudentId" },
                    "first_name": { "type": "string" },
                    "last_name": { "type": "string" },
                    "email": { "type": "string" },
                    "mobile_number": { "type": "string" },
                    "date_of_birth": { "type": "string" },
                    "gender": { "type": "string" },
                    "country_of_citizenship": { "type": "string" }
                  }
                },
                "funding_request": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["id"],
                  "properties": {
                    "id": { "$ref": "../common/defs.v1.json#/$defs/FundingRequestId" },
                    "created_at": { "$ref": "../common/defs.v1.json#/$defs/ISODateTime" },
                    "match_status": { "type": "integer", "minimum": 1 },
                    "research_interest": { "type": "string" },
                    "paper_title": { "type": "string" },
                    "journal": { "type": "string" },
                    "year": { "type": "integer", "minimum": 1900, "maximum": 2100 },
                    "research_connection": { "type": "string" },
                    "attachments": { "type": ["string", "object"] },
                    "student_template_ids": { "type": ["string", "object"] },
                    "status": { "type": "string" },
                    "email_subject": { "type": "string" },
                    "email_content": { "type": "string" }
                  }
                },
                "email": {
                  "type": ["object", "null"],
                  "additionalProperties": false,
                  "properties": {
                    "id": { "$ref": "../common/defs.v1.json#/$defs/FundingEmailId" },
                    "main_sent": { "type": "boolean" },
                    "main_sent_at": { "$ref": "../common/defs.v1.json#/$defs/ISODateTime" },
                    "main_email_subject": { "type": "string" },
                    "main_email_body": { "type": "string" },
                    "reminder_one_sent": { "type": "boolean" },
                    "reminder_one_sent_at": { "$ref": "../common/defs.v1.json#/$defs/ISODateTime" },
                    "reminder_one_body": { "type": "string" },
                    "reminder_two_sent": { "type": "boolean" },
                    "reminder_two_sent_at": { "$ref": "../common/defs.v1.json#/$defs/ISODateTime" },
                    "reminder_two_body": { "type": "string" },
                    "reminder_three_sent": { "type": "boolean" },
                    "reminder_three_sent_at": { "$ref": "../common/defs.v1.json#/$defs/ISODateTime" },
                    "reminder_three_body": { "type": "string" },
                    "professor_replied": { "type": "boolean" },
                    "professor_replied_at": { "$ref": "../common/defs.v1.json#/$defs/ISODateTime" }
                  }
                },
                "reply": {
                  "type": ["object", "null"],
                  "additionalProperties": false,
                  "properties": {
                    "reply_body_cleaned": { "type": "string" },
                    "engagement_label": { "type": "string" },
                    "activity_status": { "type": "string" },
                    "short_rationale": { "type": "string" },
                    "key_phrases": { "type": "string" },
                    "auto_generated_type": { "type": "string" }
                  }
                },
                "professor": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["id"],
                  "properties": {
                    "id": { "$ref": "../common/defs.v1.json#/$defs/ProfessorId" },
                    "first_name": { "type": "string" },
                    "last_name": { "type": "string" },
                    "full_name": { "type": "string" },
                    "occupation": { "type": "string" },
                    "research_areas": { "type": "string" },
                    "credentials": { "type": "string" },
                    "area_of_expertise": { "type": "string" },
                    "categories": { "type": "string" },
                    "department": { "type": "string" },
                    "email_address": { "type": "string" },
                    "url": { "$ref": "../common/defs.v1.json#/$defs/Url" },
                    "others": { "type": ["string", "object"] },
                    "canspider_digest_id": { "type": "string" }
                  }
                },
                "institute": {
                  "type": ["object", "null"],
                  "additionalProperties": false,
                  "properties": {
                    "institution_name": { "type": "string" },
                    "department_name": { "type": "string" },
                    "country": { "type": "string" }
                  }
                },
                "metas": {
                  "type": ["object", "null"],
                  "additionalProperties": false,
                  "properties": {
                    "funding_template_initial_data": { "type": ["string", "object"] }
                  }
                }
              }
            },
            "intelligence": {
              "type": ["object", "null"],
              "additionalProperties": false,
              "properties": {
                "requirements": { "type": "object", "default": {} },
                "preferences": { "type": "object", "default": {} },
                "background": { "type": "object", "default": {} },
                "composer_prereqs": { "type": "object", "default": {} },
                "gmail_connected": { "type": "boolean" },
                "templates_finalized": { "type": "boolean" }
              }
            },
            "platform_context_hash": { "$ref": "../common/defs.v1.json#/$defs/Hash" },
            "student_background_hash": { "$ref": "../common/defs.v1.json#/$defs/Hash" },
            "composer_prereqs_hash": { "$ref": "../common/defs.v1.json#/$defs/Hash" }
          }
        }
      }
    }
  ]
}

