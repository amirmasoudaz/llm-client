{
  "schema_version": "1.0",
  "plan_template_id": "Funding.Outreach.Professor.Summarize@1.0.0",
  "intent_type": "Funding.Outreach.Professor.Summarize",
  "plan_version": "planner-1.0",
  "description": "Load platform context, retrieve professor profile (platform + optional web), and produce a Professor.Summary outcome.",
  "steps": [
    {
      "step_id": "s1",
      "kind": "operator",
      "name": "Platform.Context.Load",
      "operator_name": "Platform.Context.Load",
      "operator_version": "1.0.0",
      "effects": ["read_only"],
      "policy_tags": ["read_only", "platform_read"],
      "risk_level": "low",
      "cache_policy": "ttl_only",
      "idempotency_template": "platform_context:{tenant_id}:{thread_id}",
      "payload": {
        "thread_id": { "from": "intent.thread_id" }
      },
      "produces": ["context.platform"]
    },
    {
      "step_id": "s2",
      "kind": "operator",
      "name": "Professor.Profile.Retrieve",
      "operator_name": "Professor.Profile.Retrieve",
      "operator_version": "1.0.0",
      "effects": ["read_only"],
      "policy_tags": ["read_only", "public_web"],
      "risk_level": "low",
      "cache_policy": "ttl_only",
      "idempotency_template": "prof_profile:{tenant_id}:{context.platform.professor.id}:{context.platform.professor.canspider_digest_id}:{intent.inputs.force_refresh}",
      "payload": {
        "professor_id": { "from": "context.platform.professor.id" },
        "professor_url": { "from": "intent.inputs.professor_ref.url" },
        "canspider_digest_id": { "from": "context.platform.professor.canspider_digest_id" },
        "force_refresh": { "from": "intent.inputs.force_refresh" }
      },
      "produces": ["steps.s2.result.profile"]
    },
    {
      "step_id": "s3",
      "kind": "operator",
      "name": "Professor.Summarize",
      "operator_name": "Professor.Summarize",
      "operator_version": "1.0.0",
      "effects": ["produce_outcome"],
      "policy_tags": ["draft_only", "public_web"],
      "risk_level": "low",
      "cache_policy": "use_if_safe",
      "idempotency_template": "prof_summary:{tenant_id}:{context.platform.professor.id}:{steps.s2.result.profile.profile_hash.value}:{intent.inputs.custom_instruction}",
      "payload": {
        "professor_id": { "from": "context.platform.professor.id" },
        "profile": { "from": "steps.s2.result.profile" },
        "custom_instruction": { "from": "intent.inputs.custom_instruction" }
      },
      "produces": ["outcome.professor_summary"]
    }
  ]
}
