{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "schemas/outcomes/reply_interpretation.v1.json",
  "title": "Outcome: Reply.Interpretation (v1)",
  "allOf": [
    { "$ref": "outcome_base.v1.json" },
    {
      "type": "object",
      "properties": {
        "outcome_type": { "const": "Reply.Interpretation" },
        "payload": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "classification",
            "summary",
            "needs_human_review",
            "is_auto_generated",
            "recommended_action",
            "confidence"
          ],
          "properties": {
            "classification": {
              "type": "string",
              "enum": [
                "interview",
                "needs_info",
                "rejection",
                "no_position",
                "auto_generated",
                "out_of_scope",
                "ambiguous"
              ]
            },
            "engagement_label": { "type": "string" },
            "activity_status": { "type": "string" },
            "next_step_type": { "type": "string" },
            "needs_human_review": { "type": "boolean" },
            "is_auto_generated": { "type": "boolean" },
            "auto_generated_type": {
              "type": "string",
              "enum": ["OUT_OF_OFFICE", "DELIVERY_FAILURE", "OTHER_AUTO", "NONE"]
            },
            "recommended_action": {
              "type": "string",
              "enum": ["draft_follow_up", "manual_review", "stop_outreach", "wait"]
            },
            "summary": { "type": "string", "minLength": 1 },
            "short_rationale": { "type": "string" },
            "key_phrases": {
              "type": "array",
              "items": { "type": "string" },
              "default": []
            },
            "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
            "security_flags": {
              "type": "array",
              "items": { "type": "string" },
              "default": []
            }
          }
        }
      }
    }
  ]
}
